.\" Automatically generated by Pandoc 2.9.2.1
.\"
.TH "tbsystemvalidate" "1" "2020-06-02" "Tbricks" "tbsystemvalidate man page"
.hy
.SH NAME
.PP
\f[C]tbsystemvalidate\f[R] \[en] validates a Tbricks system.
.SH SYNOPSIS
.PP
\f[C]tbsystemvalidate -h\f[R]|\f[C]--help\f[R]
.PP
\f[C]tbsystemvalidate\f[R] [\f[C]-a\f[R]=<admin_system>]
[\f[C]-s\f[R]=<system>[,<system> \&...]] [\f[C]-c\f[R]=<config_file>]
[\f[C]--quick\f[R]] [\f[C]--debug\f[R]]
.SH DESCRIPTION
.PP
\f[C]tbsystemvalidate\f[R] is used for validating a Tbricks system.
.SH SUBCOMMANDS
.PP
\f[B]The following subcommands are supported:\f[R]
.TP
\f[B]\f[CB]tbsystemvalidate -h\f[B]\f[R]|\f[B]\f[CB]--help\f[B]\f[R]
Displays usage of the tool, including available subcommands and options.
.TP
\f[B]\f[CB]tbsystemvalidate\f[B]\f[R] [<options>]
Validates a Tbricks system according to the given options.
See the \f[B]OPTIONS\f[R] section for details.
.SH OPTIONS
.TP
\f[B]\f[CB]-a\f[B]\f[R]=<admin_system>
Admin system.
If not specified, will be extracted from
\f[C]$TBRICKS_ADMIN_CENTER\f[R].
.TP
\f[B]\f[CB]-s\f[B]\f[R]=<system>[,<system> \&...]
Systems to be validated, separated by comma.
If not specified, will be extracted from \f[C]$TBRICKS_SYSTEM\f[R].
.TP
\f[B]\f[CB]-c\f[B]\f[R]=<config_file>
Configuration file.
If not specified, will be extracted from
\f[C]$TBRICKS_VALIDATE_CONFIG_FILE\f[R].
The loacation of fetched file is written at beginning of the execution
of the validation.
.TP
\f[B]\f[CB]--quick\f[B]\f[R]
Do not print full report and do not check unexpected log entries.
.TP
\f[B]\f[CB]--debug\f[B]\f[R]
On exit, the \f[C]tbsystemvalidate.txt\f[R] file is created.
It includes all internal data structures.
.SH CHECKS
.PP
\f[B]Nodes TCP/IP port range\f[R]
.PP
The \f[C]tcpip_port_range\f[R] propety should be set for each property.
.PP
Related properties:
.IP \[bu] 2
node: tcpip_port_range
.PP
\f[B]Resources without associations\f[R]
.PP
Each resource (except download sctipt) should be associated with
component/service/system.
.PP
Related properties:
.IP \[bu] 2
resource: components, services, systems, download_script
.PP
\f[B]Resources download status\f[R]
.PP
Each resource should not have errors in the \f[C]download_status\f[R]
property.
.PP
Related properties:
.IP \[bu] 2
resource: download_status
.PP
\f[B]Resources download time\f[R]
.PP
Each resource should be downloaded before start of component/service not
less than \f[C]download_minutes_min\f[R] and not more than
\f[C]download_minutes_max\f[R] minutes (see configuration file).
.PP
Related properties:
.IP \[bu] 2
resource: download_time, download_days, download_timezone
.IP \[bu] 2
component: speedcore, start_time, stop_time, start_days, stop_days,
timezone
.IP \[bu] 2
service: start_of_day_time, end_of_day_time, venue_time_zone
.PP
\f[B]Any Trading or Quoting needs Order Persistence in its
subsystem\f[R]
.PP
Each subsytem that has Trading or Qualing should have Order Persistence.
.PP
Related properties:
.IP \[bu] 2
service: type
.PP
\f[B]Number of Order Persistence in subsystems\f[R]
.PP
Each subsystem should include not more than one Order Persistence.
.PP
Related properties:
.IP \[bu] 2
service: type
.PP
\f[B]DB transaction mode\f[R]
.PP
Transaction mode should not be turned off.
.PP
Related properties:
.IP \[bu] 2
component: bdb_transaction_mode
.PP
\f[B]DB cache size\f[R]
.PP
DB cache size should be not less than recommended (see configuration
file).
.PP
Related properties:
.IP \[bu] 2
component: type, bdb_cache_size, audit_cache_size,
hd_db_cache_size\&...[properties from configuration file]
.PP
\f[B]Debug mode\f[R]
.PP
Debug mode should not be turned on.
.PP
Related properties:
.IP \[bu] 2
component: debug_mode
.PP
\f[B]Level of persisted logs\f[R]
.PP
Level of persisted logs should not be more than status (see
configuration file).
.PP
Related properties:
.IP \[bu] 2
component: log_level_persisted
.PP
\f[B]Environment\f[R]
.PP
Jemalloc debug mode should not be enabled i.e
\f[C]TB_JEMALLOC_DEBUG=1\f[R].
.PP
Related properties:
.IP \[bu] 2
component: environment
.PP
\f[B]Unique value of tcpip_port\f[R]
.PP
Ports of node and components should not conflict.
.PP
Related properties:
.IP \[bu] 2
node: tcpip_port_range
.IP \[bu] 2
component: node, tcpip_port
.PP
\f[B]TRD start time\f[R]
.PP
All Trading Reference Data services should start before start of plugin
engines on start_delay_minutes (see configuration file).
.PP
Related properties:
.IP \[bu] 2
component: type, speedcore, start_time, stop_time, start_days,
stop_days, timezone
.IP \[bu] 2
service: type, start_of_day_time, end_of_day_time, venue_time_zone
.PP
\f[B]MD start time\f[R]
.PP
If there are two several Market Data components: One inside Speedcore
and other in default subsystem, then default one should start later than
the one inside Speedcore at least in start_delay_minutes (see
configuration file).
.PP
Related properties:
.IP \[bu] 2
component: type, speedcore, start_time, stop_time, start_days,
stop_days, timezone
.IP \[bu] 2
service: type, start_of_day_time, end_of_day_time, venue_time_zone
.PP
\f[B]Unexpected log entries\f[R]
.PP
This check executes the command
\f[C]tblog <system> -k level le warning -c Level\f[R] and prints out the
total number of logs of specified levels.
.PP
Does not work with the \f[C]--quick\f[R] option.
.SH NOTE
.PP
Available only on Linux.
.SH EXAMPLES
.PP
\f[B]Validate system \f[CB]matrix\f[B] with admin system
\f[CB]matrix_admin_system\f[B] in quick mode\f[R]
.IP
.nf
\f[C]
   $ tbsystemvalidate -a=matrix_admin_sys -s=matrix --quick
\f[R]
.fi
.SH EXIT STATUS
.PP
The following exit values are returned:
.IP \[bu] 2
0: Successful completion.
.IP \[bu] 2
1: An error occurred.
.IP \[bu] 2
2: Invalid command line options were specified.
.SH SEE ALSO
.PP
\f[C]tbadmin\f[R](1), \f[C]tbaudit\f[R](1), \f[C]tbcomponent\f[R](1),
\f[C]tbcore\f[R](1), \f[C]tbcpuset\f[R](1), \f[C]tbctf\f[R](1),
\f[C]tbdbdump\f[R](1), \f[C]tbgdb\f[R](1), \f[C]tbintro\f[R](1),
\f[C]tbirdconvert\f[R](1), \f[C]tblicense\f[R](1), \f[C]tblog\f[R](1),
\f[C]tbmemtrace\f[R](1), \f[C]tbnodevalidate\f[R](1),
\f[C]tbnode\f[R](1), \f[C]tbplugin\f[R](1), \f[C]tbrelease\f[R](1),
\f[C]tbresource\f[R](1), \f[C]tbrole\f[R](1), \f[C]tbsample\f[R](1),
\f[C]tbservice\f[R](1), \f[C]tbstack\f[R](1), \f[C]tbsubsystem\f[R](1),
\f[C]tbsystem\f[R](1), \f[C]tbuser\f[R](1), \f[C]tbvalidate\f[R](1),
\f[C]zeroconf_extender\f[R](1)
