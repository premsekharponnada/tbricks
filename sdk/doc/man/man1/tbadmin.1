.\" Automatically generated by Pandoc 2.9.2.1
.\"
.TH "tbadmin" "1" "2020-06-02" "Tbricks" "tbadmin man page"
.hy
.SH NAME
.PP
\f[C]tbadmin\f[R] \[en] starts, stops, upgrades, gets status, and shows
information about Tbricks admin servers.
.SH SYNOPSIS
.PP
\f[C]tbadmin\f[R] [\f[C]help\f[R]]
.PP
\f[C]tbadmin\f[R] \f[C]start\f[R]|\f[C]stop\f[R]|\f[C]status\f[R]
<server> [\f[C]config\f[R]]
.PP
\f[C]tbadmin info\f[R]
.PP
\f[C]tbadmin list\f[R]|\f[C]ls\f[R]
.PP
\f[C]tbadmin upgrade\f[R] [\f[C]-d\f[R]] [\f[C]-m\f[R]] [\f[C]-z\f[R]]
<version>
.SH DESCRIPTION
.PP
\f[C]tbadmin\f[R] is used on Tbricks admin servers to start, stop, show
status and information, and to upgrade.
.SH SUBCOMMANDS
.PP
\f[B]The following subcommands are supported:\f[R]
.TP
\f[B]\f[CB]tbadmin\f[B]\f[R] [\f[B]\f[CB]help\f[B]\f[R]]
Show \f[C]tbadmin\f[R] usage, including available subcommands and
options.
.TP
\f[B]\f[CB]tbadmin\f[B]\f[R] \f[B]\f[CB]start\f[B]\f[R]|\f[B]\f[CB]stop\f[B]\f[R]|\f[B]\f[CB]status\f[B]\f[R] <server> [\f[B]\f[CB]config\f[B]\f[R]]
Start, stop, and get the status of the Tbricks admin <server>.
.RS
.PP
NOTE: [\f[C]config\f[R]] is mandatory except for tbricks_mdnsd servers.
.RE
.TP
\f[B]\f[CB]tbadmin info\f[B]\f[R]
Show status of all Tbricks admin servers configured on the current
machine.
.TP
\f[B]\f[CB]tbadmin list\f[B]\f[R]|\f[B]\f[CB]ls\f[B]\f[R]
Shows version information for all Tbricks admin servers in current
administration system.
.TP
\f[B]\f[CB]tbadmin upgrade\f[B]\f[R] [\f[B]\f[CB]-d\f[B]\f[R]] [\f[B]\f[CB]-m\f[B]\f[R]] [\f[B]\f[CB]-z\f[B]\f[R]] <version>
Upgrade all admin servers on all machines in the current administration
system to the specified <version>.
.RS
.PP
\f[B]Options:\f[R]
.TP
\f[B]\f[CB]-d\f[B]\f[R]
Upgrade dependencies of the Tbricks administration system by installing
additional third-party software.
.TP
\f[B]\f[CB]-m\f[B]\f[R]
Restart the mdnsd services during the upgrade.
.TP
\f[B]\f[CB]-z\f[B]\f[R]
Restart the Zeroconf Extender services during the upgrade.
.RE
.SS Upgrade
.PP
Requirements:
.IP \[bu] 2
Admin Center, Distribution Center, and Admin Agents on each node are
online.
.IP \[bu] 2
Admin Tools of version 2.8.0 or later.
.PP
When started, \f[C]tbadmin\f[R] upgrade reports progress and status from
upgradable nodes.
After a successful upgrade the service will restart to apply changes.
If all services start with the new version then upgrade process
terminates with success.
In other case error will be reported.
.SS Automatic upgrade for Admin Agent
.PP
When Admin Agent tries to connect to an Admin Center with a different
version, the AA is automatically upgraded to the Admin Center\[cq]s
version.
If auto-upgrade failed, the AA is taken online normally to make further
upgrade possible.
.SS Troubleshooting
.IP \[bu] 2
\f[C]tbadmin\f[R] upgrade hangs on the \f[B]System restart progress\f[R]
state and terminates after 5 minutes.
.RS 2
.PP
It happens when Admin Tools is not managed by systemd, hence, does not
up automatically.
In this case you should start all upgradable services manually on each
node.
.RE
.IP \[bu] 2
The DistributionCenter was upgraded but not the AdminCenter.
.RS 2
.PP
DC might be of a different version than the AC.
To make them consistent, find and resolve the issue that prevented the
AC upgrade and then rerun the entire upgrade.
.RE
.SH EXIT STATUS
.PP
The following exit values are returned:
.IP \[bu] 2
0: Successful completion.
.IP \[bu] 2
1: An error occurred.
.IP \[bu] 2
2: Invalid command line options were specified.
.SH SEE ALSO
.PP
\f[C]tbintro\f[R](1), \f[C]tbaudit\f[R](1), \f[C]tbcomponent\f[R](1),
\f[C]tbcore\f[R](1), \f[C]tbcpuset\f[R](1), \f[C]tblog\f[R](1),
\f[C]tbnode\f[R](1), \f[C]tbrelease\f[R](1), \f[C]tbresource\f[R](1),
\f[C]tbservice\f[R](1), \f[C]tbsubsystem\f[R](1), \f[C]tbsystem\f[R](1),
\f[C]tbuser\f[R](1)
