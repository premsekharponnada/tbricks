.\" Automatically generated by Pandoc 2.9.2.1
.\"
.TH "zeroconf_extender" "1" "2020-06-02" "Tbricks" "zeroconf_extender man page"
.hy
.SH NAME
.PP
\f[C]zeroconf_extender\f[R] \[en] bridges automatic service detection
across subnets.
.SH SYNOPSIS
.PP
\f[C]zeroconf_extender\f[R] [\f[C]help\f[R]]
.PP
\f[C]zeroconf_extender export\f[R] [<port>] [\f[C]-l\f[R] <filename>]
[\f[C]--log_level\f[R] <level>] [\f[C]--log_format\f[R] <format>]
[\f[C]--isolated_subnets\f[R] <red-subnets>: <green-subnets>[:
<forwarder_host>:[ <forwarder_IP>]]]
.PP
\f[C]zeroconf_extender sync\f[R] {<host>} [<port>] [\f[C]-l\f[R]
<filename>] [\f[C]--log_level\f[R] <level>] [\f[C]--log_format\f[R]
<format>] [\f[C]--isolated_subnets\f[R] <red-subnets>: <green-subnets>[:
<forwarder_host>:[ <forwarder_IP>]]]
.SH DESCRIPTION
.PP
The \f[C]zeroconf_extender\f[R] server extends the automatic detection
of services across subnets.
.PP
This is required when setting up a proximity hosted solution where some
services are running on a remote subnet so that Zeroconf multicast does
not work.
.PP
The \f[C]zeroconf_extender\f[R] tool can either run in export mode or
syncronization mode.
.PP
On the designated main site, one \f[C]zeroconf_extender\f[R] should be
run in export mode.
.PP
On each remote subnet running tbricks services, one
\f[C]zeroconf_extender\f[R] service should be set up in synchronization
mode.
.PP
When this is set up, the \f[C]zeroconf_extender\f[R] will automatically
bridge all service registrations across the subnets to ensure that all
services can find each other automatically regardless of location.
.PP
An x-ray frontend will by default locate services on the local subnet
using Zeroconf, but if running on a remote subnet, the client can
optionally be configured in the login panel to connect to a specific
\f[C]zeroconf_extender\f[R] running in export mode.
.SH OPTIONS
.PP
\f[B]The following options are common for all subcommands:\f[R]
.TP
\f[B]\f[CB]-l\f[B]\f[R]
Specify an alternate location for the log file.
.TP
\f[B]\f[CB]--log_level\f[B]\f[R]
Specify logging level for zeroconf_extender.
See \f[C]tblog\f[R](1) for list of available logging levels and their
descriptions.
Default level is \f[C]notice\f[R].
Useful mostly for troubleshooting.
.TP
\f[B]\f[CB]--log_format\f[B]\f[R]
Specify format of log messages printed to log file.
See \f[C]tblog\f[R](1) for list of available logging formats and their
descriptions.
Default format is \f[C]def\f[R].
Useful mostly for troubleshooting.
.TP
\f[B]\f[CB]--isolated_subnets\f[B]\f[R]
Specify list of isolated subnets, i.e.\ list of subnets (\[lq]red\[rq])
which hosts cannot be directly accesses by hosts from \[lq]green\[rq]
subnets.
.RS
.PP
Argument to this option is two comma separated lists of IP network masks
in form X.Y.Z.W[/N] separated by colon.
First list enumerates \[lq]red\[rq] subnets, the second
one\[en]\[lq]green\[rq].
.PP
Network masks lists can be optionally followed by hostname and IP of the
host where TCP forwarder is running.
This hostname will be sent to clients from \[lq]green\[rq] subnets for
services running in \[lq]red\[rq] ones.
.PP
If forwarder IP is not specified ZE will try to resolve it, otherwise
hostname and IP will be used as is.
.PP
If forwarder host is not specified it is assumed that forwarder is
running on the same host as ZeroconfExtender
.PP
This option can be given multiple times.
.RE
.SH SUBCOMMANDS
.PP
The \f[C]zeroconf_extender\f[R] command provides subcommands to either
export services or to synchronize services to a subnet.
.PP
\f[B]The following subcommands are supported:\f[R]
.TP
\f[B]\f[CB]zeroconf_extender\f[B]\f[R] [\f[B]\f[CB]help\f[B]\f[R]]
Displays usage of the tool, including available subcommands and options.
.TP
\f[B]\f[CB]zeroconf_extender export\f[B]\f[R] [<port>] [<options>]
Start the \f[C]zeroconf_extender\f[R] in export mode and make services
available to other subnets.
If the port argument is not provided, the default port number of 50000
will be used.
.RS
.PP
The \f[C]zeroconf_extender\f[R] by default outputs its log file to
\f[C]/opt/tbricks/logs/zeroconf_extender.log\f[R], but this location may
be overridden by specifying the l option.
.RE
.TP
\f[B]\f[CB]zeroconf_extender sync\f[B]\f[R] <host> [<port>] [<options>]
Start the \f[C]zeroconf_extender\f[R] in synchronization mode and
synchronize services from the \f[C]zeroconf_extender\f[R] running in
export mode on the specified host name.
.RS
.PP
If the port argument is not provided, the default port number of 50000
will be used.
.PP
The \f[C]zeroconf_extender\f[R] by default outputs its log file to
\f[C]/opt/tbricks/logs/zeroconf_extender.log\f[R], but this location may
be overridden by specifying the l option.
.RE
.SH EXAMPLES
.PP
\f[B]Set up a zeroconf_extender on the main site that exports
services\f[R]
.IP
.nf
\f[C]
   $ zeroconf_extender export
   $
\f[R]
.fi
.PP
\f[B]Set up a zeroconf_extender on a remote subnet to sync services\f[R]
.IP
.nf
\f[C]
   $ zeroconf_extender sync tbrickshost.company.com
   $
\f[R]
.fi
.PP
\f[B]Set up a zeroconf_extender on a remote subnet using a specific
port\f[R]
.IP
.nf
\f[C]
   $ zeroconf_extender sync tbrickshost.company.com 54001
   $
\f[R]
.fi
.PP
\f[B]Set up a zeroconf_extender with isolated subnets\f[R]
.IP
.nf
\f[C]
   $ zeroconf_extender export --isolated_subnets 10.1.2.0/24,10.1.3.0/24:192.168.75.192/26
   $
\f[R]
.fi
.SH EXIT STATUS
.PP
The following exit values are returned:
.IP \[bu] 2
0: Successful completion.
.IP \[bu] 2
1: An error occurred.
.IP \[bu] 2
2: Invalid command line options were specified.
.SH SEE ALSO
.PP
\f[C]tbintro\f[R](1), \f[C]tbaudit\f[R](1), \f[C]tbcomponent\f[R](1),
\f[C]tbcore\f[R](1), \f[C]tblog\f[R](1), \f[C]tbnode\f[R](1),
\f[C]tbrelease\f[R](1), \f[C]tbresource\f[R](1), \f[C]tbservice\f[R](1),
\f[C]tbsubsystem\f[R](1), \f[C]tbsystem\f[R](1), \f[C]tbuser\f[R](1)
