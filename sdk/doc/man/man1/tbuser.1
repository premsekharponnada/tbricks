.\" Automatically generated by Pandoc 2.9.2.1
.\"
.TH "tbuser" "1" "2020-06-02" "Tbricks" "tbuser man page"
.hy
.SH NAME
.PP
\f[C]tbuser\f[R] \[en] lists available users and sets their properties.
.SH SYNOPSIS
.PP
\f[C]tbuser\f[R] [\f[C]help\f[R]]
.PP
\f[C]tbuser create\f[R] <user> [<identifier>] [<system>]
.PP
\f[C]tbuser destroy\f[R] <user> [<system>]
.PP
\f[C]tbuser list\f[R] [\f[C]-d\f[R]] [<system>]
.PP
\f[C]tbuser set\f[R] [<property>=<value> <user> [<system>]]
.PP
\f[C]tbuser clear\f[R] [<property>[,<property>] \&... <user>] [<system>]
.PP
\f[C]tbuser get\f[R] [<property>[,<property>] \&...] [<user>] [<system>]
.PP
\f[C]tbuser history\f[R]
.SH DESCRIPTION
.PP
The \f[C]tbuser\f[R] command lists the users that are available in the
Tbricks system and sets their properties.
.PP
A Tbricks user contains a number of attributes that both define how it
should be displayed in the system as well as how authentication from an
external authentication source should be mapped to the user.
.SS Identifiers
.PP
Please see \f[C]tbintro\f[R](1) for information about the identifiers
used.
.SS Properties
.PP
Every user has a set of properties that are used to appropriately
display user characteristics, as well as setting attributes related to
authentication.
.PP
The identifier provides a persistent unique identifier (an UUID), that
is assigned at creation time.
It is typically used for cross references and/or scripts that require
that the identifier will not change.
The identifier cannot be changed by the user.
.TP
\f[B]\f[CB]identifier\f[B]\f[R]
The UUID uniquely identifying this user.
.PP
\f[B]The following properties can be set by a user:\f[R]
.TP
\f[B]\f[CB]short_name\f[B]\f[R]
A short name that is used to identify the user.
This is usually a nickname or other similar short identifier.
.TP
\f[B]\f[CB]deleted\f[B]\f[R]
True if the user is to be viewed as deleted in the system.
The actual user entry is still not removed, as it may be required to
display old business objects (orders, trades, \&...) owned by the user.
.PP
\f[B]The following properties specify display attributes for the
user:\f[R]
.TP
\f[B]\f[CB]name\f[B]\f[R]
The full display name of the user, used for GUI presentation.
Usually this is on the form <FirstName LastName>.
.PP
\f[B]The following properties are related to authentication:\f[R]
.TP
\f[B]\f[CB]password\f[B]\f[R]
A trivial password authentication scheme is enabled by setting this
property.
If this property is not set or cleared, no password is required to login
to the system.
.TP
\f[B]\f[CB]authentication\f[B]\f[R]
Set user authentication type.
It can be configured in one of two different ways: PlainPassword and
WindowsDomain.
PlainPassword is internal Tbricks system authentication.
WindowsDomain is external user authentication with Windows domain or
LDAP service.
PlainPassword type is used by default.
.TP
\f[B]\f[CB]domain\f[B]\f[R]
Setup user\[cq]s domain.
Allowed only for authentication with WindowsDomain type.
.TP
\f[B]\f[CB]domain_user\f[B]\f[R]
Setup user in domain should be used in authentication process.
Allowed only for authentication with WindowsDomain type.
.TP
\f[B]\f[CB]allow_single_sign_on\f[B]\f[R]
Setup allows WindowsDomain user to be signed on automatically.
.TP
\f[B]\f[CB]allow_multiple_logins\f[B]\f[R]
Allow or disallow to user multiple log-ins to system.
User can connect to a system only once if property is set to
\f[C]no\f[R].
Multiple connection are allowed by default.
.SH SUBCOMMANDS
.PP
All subcommands that modify state are logged persistently to the history
log in their original form.
.PP
The \f[C]tbuser\f[R] command provides subcommands to list available
users, set and get user properties, and provide information about
historically issued commands.
.PP
\f[B]The following subcommands are supported:\f[R]
.TP
\f[B]\f[CB]tbuser\f[B]\f[R] [\f[B]\f[CB]help\f[B]\f[R]]
Displays usage of the tool, including available subcommands and options.
.TP
\f[B]\f[CB]tbuser create\f[B]\f[R] <user> [<identifier>] [<system>]
Creates a new Tbricks user with the specified short name.
.RS
.PP
If the optional identifier is specified, the tool verifies that it is
specified as unique and not currently in use by another existing user.
If it is not specified, an guaranteed unique identifier will
automatically be generated for the user.
.RE
.TP
\f[B]\f[CB]tbuser destroy\f[B]\f[R] <user> [<system>]
Sets the deleted property to 1 for the user, effectively deleting if
from the admin infrastructure.
.TP
\f[B]\f[CB]tbuser list\f[B]\f[R] [\f[B]\f[CB]-d\f[B]\f[R]] [<system>]
Lists all users configured in the system.
.RS
.PP
\f[C]-d\f[R] show deleted users.
.RE
.TP
\f[B]\f[CB]tbuser set\f[B]\f[R] [<property>=<value> <user> [<system>]]
If the property is not specified, this lists all possible properties
that can be set.
Otherwise, it sets the property to the given value for the user.
.RS
.PP
Only some properties can be edited.
See the \f[B]Properties\f[R] section for more information on what
properties can be set and acceptable values.
.RE
.TP
\f[B]\f[CB]tbuser clear\f[B]\f[R] [<property>[,<property>] \&... <user>] [<system>]
Clears values for the properties for the specified user.
.RS
.PP
If the property is not specified, this will list all possible properties
that can be cleared.
.RE
.TP
\f[B]\f[CB]tbuser get\f[B]\f[R] [<property>[,<property>] \&...] [<user>] [<system>]
Displays configuration information for the specified user or possible
properties if the user is not specified.
.TP
\f[B]\f[CB]tbuser history\f[B]\f[R]
Displays the history of all \f[C]tbuser\f[R] commands successfully
issued that affect persisted state.
The history output provides information on from which node, what user,
and what command was issued at what point in time.
.SH EXAMPLES
.PP
\f[B]Creating a user with a specific unique identifier\f[R]
.IP
.nf
\f[C]
   $ tbuuidgen
   70adf796-3be1-11df-a85d-bf21658f4567
   $ tbuser create selina 70adf796-3be1-11df-a85d-bf21658f4567
   User selina created with identifier 70adf796-3be1-11df-a85d-bf21658f4567.
   $
\f[R]
.fi
.PP
\f[B]Listing all available users\f[R]
.IP
.nf
\f[C]
   $ tbuser list
   User Name Systems
   ---------------------------------------------------------------------------
   johna John Adams production, test
   selina Selina Smith production, test
   argo Aulix Johnson production, test
   dev1 Tmp contractor 1 test
   dev2 Tmp contractor 2 test
   $
\f[R]
.fi
.PP
\f[B]Setting a user property\f[R]
.IP
.nf
\f[C]
   $ tbuser set name=\[dq]Selina Smith\[dq] selina system_name
   $
\f[R]
.fi
.PP
\f[B]Getting a user property\f[R]
.IP
.nf
\f[C]
   $ tbuser get name selina system_name
   Selina Smith
   $
\f[R]
.fi
.PP
\f[B]Getting all user properties\f[R]
.IP
.nf
\f[C]
   $ tbuser get selina system_name
              identifier : 70adf796-3be1-11df-a85d-bf21658f4567
                    name : Selina Smith
              short_name : selina
                   roles : Unrestricted (system)
          authentication : PlainPassword
                  domain :
             domain_user :
   allow_multiple_logins : yes
   $
\f[R]
.fi
.PP
\f[B]Mark a user as deleted\f[R]
.IP
.nf
\f[C]
   $ tbuser destroy selina
   $
\f[R]
.fi
.PP
\f[B]Setting authentication using Windows / LDAP\f[R]
.IP
.nf
\f[C]
   $ tbuser set authentication=WindowsDomain selina system_name
   $ tbuser set domain=domain selina system_name
   $ tbuser set domain_user=selina selina system_name

   $ tbuser set authentication=WindowsDomain jane system_name
   $ tbuser set domain=LDAP://domain/cn=Users,dc=ride,dc=tbricks,dc=com jane system_name
   $ tbuser set domain_user=jane jane system_name
\f[R]
.fi
.SH EXIT STATUS
.PP
The following exit values are returned:
.IP \[bu] 2
0: Successful completion.
.IP \[bu] 2
1: An error occurred.
.IP \[bu] 2
2: Invalid command line options were specified.
.SH SEE ALSO
.PP
\f[C]tbintro\f[R](1), \f[C]tbaudit\f[R](1), \f[C]tbcomponent\f[R](1),
\f[C]tbcore\f[R](1), \f[C]tblog\f[R](1), \f[C]tbnode\f[R](1),
\f[C]tbrelease\f[R](1), \f[C]tbresource\f[R](1), \f[C]tbservice\f[R](1),
\f[C]tbsubsystem\f[R](1), \f[C]tbsystem\f[R](1), \f[C]tbuser\f[R](1)
